# ---------------- Application Properties ----------------
# URL for SSE
%dev.streamUrl=http://localhost:8080/dashboard/stream
%test.streamUrl=http://localhost:8081/dashboard/stream
streamUrl=${STREAM_URL:http://localhost:8080/dashboard/stream}
%dev.orderUrl=http://localhost:8080/api/order
%test.orderUrl=http://localhost:8081/api/order
orderUrl=${ORDER_URL}
%dev.storeId=ATLANTA
%test.storeId=ATLANTA
storeId=${STORE_ID:ATLANTA}

# ---------------- HTTP / CORS ----------------
quarkus.http.cors.enabled=true
%dev.quarkus.http.cors.origins=http://localhost
%test.quarkus.http.cors.origins=http://localhost
quarkus.http.cors.origins=${CORS_ORIGINS}
quarkus.http.cors.methods=GET,PUT,POST
quarkus.http.cors.headers=X-Custom,accept,origin,authorization,content-type,x-requested-with
quarkus.http.cors.exposed-headers=Content-Disposition
quarkus.http.cors.access-control-max-age=24H

# ---------------- Logging ----------------
quarkus.log.console.format=%-5p [%c{2.}] (%t) %s%e%n
quarkus.log.level=INFO
quarkus.log.category."io.quarkuscoffeeshop".level=DEBUG
quarkus.log.category."io.quarkuscoffeeshop.utils".level=WARNING

# ---------------- Datasources (DEV uses H2 for smoke tests) ----------------
# Default DS -> schema=coffeeshop
%dev.quarkus.datasource.db-kind=h2
%dev.quarkus.datasource.jdbc.url=jdbc:h2:mem:coffeeshop;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
%dev.quarkus.datasource.username=sa
%dev.quarkus.datasource.password=
%dev.quarkus.datasource.jdbc.max-size=16
%dev.quarkus.hibernate-orm.log.sql=true
%dev.quarkus.hibernate-orm.schema-management.strategy=drop-and-create

# Named DS -> barista
%dev.quarkus.datasource.barista.db-kind=h2
%dev.quarkus.datasource.barista.jdbc.url=jdbc:h2:mem:barista;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
%dev.quarkus.datasource.barista.username=sa
%dev.quarkus.datasource.barista.password=
%dev.quarkus.datasource.barista.jdbc.max-size=16

# Named DS -> kitchen
%dev.quarkus.datasource.kitchen.db-kind=h2
%dev.quarkus.datasource.kitchen.jdbc.url=jdbc:h2:mem:kitchen;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
%dev.quarkus.datasource.kitchen.username=sa
%dev.quarkus.datasource.kitchen.password=
%dev.quarkus.datasource.kitchen.jdbc.max-size=16

# ---------------- Test ----------------
%test.quarkus.datasource.db-kind=postgresql
%test.quarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5432/coffeeshopdb?currentSchema=coffeeshop
%test.quarkus.datasource.username=coffeeshopuser
%test.quarkus.datasource.password=redhat-21
%test.quarkus.datasource.jdbc.max-size=16
%test.quarkus.hibernate-orm.log.sql=true
%test.quarkus.hibernate-orm.schema-management.strategy=drop-and-create

%test.quarkus.datasource.barista.db-kind=postgresql
%test.quarkus.datasource.barista.jdbc.url=jdbc:postgresql://localhost:5432/coffeeshopdb?currentSchema=barista
%test.quarkus.datasource.barista.username=coffeeshopuser
%test.quarkus.datasource.barista.password=redhat-21
%test.quarkus.datasource.barista.jdbc.max-size=16

%test.quarkus.datasource.kitchen.db-kind=postgresql
%test.quarkus.datasource.kitchen.jdbc.url=jdbc:postgresql://localhost:5432/coffeeshopdb?currentSchema=kitchen
%test.quarkus.datasource.kitchen.username=coffeeshopuser
%test.quarkus.datasource.kitchen.password=redhat-21
%test.quarkus.datasource.kitchen.jdbc.max-size=16

# ---------------- Prod (env-driven) ----------------
%prod.quarkus.datasource.db-kind=postgresql
%prod.quarkus.datasource.jdbc.url=${PGSQL_URL}
%prod.quarkus.datasource.jdbc.max-size=16
%prod.quarkus.datasource.username=${PGSQL_USER}
%prod.quarkus.datasource.password=${PGSQL_PASSWORD}
%prod.quarkus.hibernate-orm.log.sql=true

%prod.quarkus.datasource.barista.db-kind=postgresql
%prod.quarkus.datasource.barista.jdbc.url=${PGSQL_URL_BARISTA}
%prod.quarkus.datasource.barista.username=${PGSQL_USER_BARISTA}
%prod.quarkus.datasource.barista.password=${PGSQL_PASSWORD_BARISTA}
%prod.quarkus.datasource.barista.jdbc.max-size=16

%prod.quarkus.datasource.kitchen.db-kind=postgresql
%prod.quarkus.datasource.kitchen.jdbc.url=${PGSQL_URL_KITCHEN}
%prod.quarkus.datasource.kitchen.username=${PGSQL_USER_KITCHEN}
%prod.quarkus.datasource.kitchen.password=${PGSQL_PASSWORD_KITCHEN}
%prod.quarkus.datasource.kitchen.jdbc.max-size=16

# ---------------- Kafka ----------------
mp.messaging.outgoing.barista-outpost.topic=barista-in
mp.messaging.incoming.orders-up.connector=smallrye-kafka
mp.messaging.incoming.orders-up.topic=orders-up
quarkus.kafka.devservices.image-name=docker.io/redpandadata/redpanda:v23.2.14
